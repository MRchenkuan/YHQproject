<?xml version="1.0" encoding="UTF-8"?>
<mapper>
    <!--根据相册分类ID查询相册 包括cover-->
    <select id="getAlbumsByGroupId" >
        select *,(SELECT p.`PATH` FROM T_PHOTO p WHERE p.`id` = a.cover) COVER from T_ALBUM a where a.GROUP = 1 order by a.order;
    </select>

    <!--获取相册groupId-->
    <select id="getGroupList" >
        select * from T_GROUP order by `ORDER`;
    </select>

    <!--获取网站封面-->
    <select id="getCoverList" >
        select
        LINK,
        (select p.PATH from T_PHOTO p where p.id=c.cover) PATH
        from T_COVER c order by `ORDER`;
    </select>

    <!--获取相册列表-->
    <select id="getAlbumList" >
        select
        id,
        (select p.PATH from T_PHOTO p where p.id=a.COVER) COVER,
        a.NAME,
        a.DESC,
        a.ORDER
        from T_ALBUM a where a.group=#{albumId} order by a.ORDER;
    </select>




    <!--根据ID查询相册信息-->
    <select id="getAlbumInfoById" >
        select * from T_TABLE_PHOTO_ALBUM a where a.id = #{id};
    </select>

    <!--根据ID查询所有照片-->
    <select id="getPhotoInfoByAlbumId" >
        select * from T_TABLE_PHOTOS a where a.albumid = #{id};
    </select>

    <!-- 得到所有相册 -->
    <select id="getAllAlbums" >
        select * from T_TABLE_PHOTO_ALBUM limit #{count};
    </select>

    <!-- 根据id更新相册信息 -->
    <update id="updateAlbumById" >
        replace into T_TABLE_PHOTO_ALBUM(#{colname}) VALUES(#{value});
    </update>

</mapper>